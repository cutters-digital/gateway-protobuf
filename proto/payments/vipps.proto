syntax = "proto3";

package payments;

option go_package = "github.com/cutters-digital/gateway-protobuf/golang/paymentspb";

// VippsPaymentRequest details the App to Gateway request for initiating and capturing Vipps payments.
message VippsPaymentRequest {
  // operation should be Initiate for the first Purchase step, but Capture for the second purchase step.
  VippsPaymentOperation operation = 1;
  // order_id should be empty during the Initiate flow, but populated during the Capture flow.
  string order_id = 2;
  // fall_back url is the App provided deep link for returning the user to the Cutters App after completing the Vipps App flow.
  // Please see https://github.com/vippsas/vipps-ecom-api/blob/master/vipps-ecom-api.md#app-switching
  string fallback_url = 3;
}

// VippsPaymentResponse details the Gateway to App response for the current payment along with the Vipps deep link.
message VippsPaymentResponse {
  // order_id should hold the orderID generated by the gateway.
  string order_id = 1;
  // deep_link should hold the Vipps provided deep link to the Vipps app.
  string deep_link = 2;
}

// VippsPaymentOperation indicates what the App thinks should be the next step of the flow.
enum VippsPaymentOperation {
  VIPPS_PAYMENT_OPERATION_INVALID = 0;
  VIPPS_PAYMENT_OPERATION_INITIATE = 1;
  VIPPS_PAYMENT_OPERATION_CAPTURE = 2;
}
